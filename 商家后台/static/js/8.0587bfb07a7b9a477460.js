webpackJsonp([8],{"5zde":function(t,e,a){a("zQR9"),a("qyJz"),t.exports=a("FeBl").Array.from},Cy6Y:function(t,e,a){var o=a("p7Cn");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("rjj0")("672a24f1",o,!0)},Gu7T:function(t,e,a){"use strict";e.__esModule=!0;var o=a("c/Tr"),r=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default=function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return(0,r.default)(t)}},OGno:function(t,e,a){"use strict";function o(t){a("Cy6Y")}Object.defineProperty(e,"__esModule",{value:!0});var r=a("fNCX"),s=a("Wxgf"),i=a("VU/8"),n=o,l=i(r.a,s.a,n,"data-v-d51f94b0",null);e.default=l.exports},Wxgf:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"view-container"},[a("h2",{staticClass:"view-title"},[t._v("添加疗程消息")]),t._v(" "),a("div",{staticClass:"container-main rule"},[a("Form",{ref:"formAdd",attrs:{model:t.formAdd,rules:t.ruleForm,"label-width":90,"label-position":"left"}},[a("div",{staticClass:"rule-item"},[a("h3",[t._v("一、规则名称")]),t._v(" "),a("Form-item",{attrs:{label:"规则名称",prop:"name"}},[a("Input",{staticStyle:{width:"272px"},attrs:{placeholder:"请输入规则名称"},model:{value:t.formAdd.name,callback:function(e){t.formAdd.name="string"==typeof e?e.trim():e},expression:"formAdd.name"}})],1),t._v(" "),a("Form-item",{attrs:{label:"规则描述",prop:"description"}},[a("Input",{staticStyle:{width:"272px"},attrs:{placeholder:"请输入规则描述"},model:{value:t.formAdd.description,callback:function(e){t.formAdd.description="string"==typeof e?e.trim():e},expression:"formAdd.description"}}),t._v(" "),a("span",{staticClass:"prompt"},[t._v("(选填)")])],1)],1),t._v(" "),a("div",{staticClass:"rule-item"},[a("h3",[t._v("二、规则设置")]),t._v(" "),a("p",{staticClass:"tit"},[t._v("1.选择项目分类"),a("span",{staticClass:"prompt"},[t._v("（最多添加5个分类）")])]),t._v(" "),a("Form-item",{attrs:{label:"项目类型",prop:"categoryIds"}},[a("Select",{staticStyle:{width:"160px"},on:{"on-change":t.setCategory},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},t._l(t.categoryList,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),t._v(" "),a("div",{staticClass:"category-tags"},t._l(t.tagsBox,function(e,o){return a("div",{key:e.id,staticClass:"tag-item",on:{"!click":function(e){t.remove(o)}}},[a("Tag",{attrs:{closable:""}},[t._v(t._s(e.name))])],1)}))],1),t._v(" "),a("p",{staticClass:"tit"},[t._v("2.设置消息模版"),a("span",{staticClass:"prompt"},[t._v("（至少填写一个模版）")])]),t._v(" "),a("Form-item",{attrs:{prop:"newMessage","label-width":30}},[a("Checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:t.formAdd.newStatus,callback:function(e){t.formAdd.newStatus=e},expression:"formAdd.newStatus"}},[a("span",{staticClass:"check"},[t._v("顾客购买项目后，推送消息")])]),t._v(" "),a("div",{staticClass:"diff"},[a("span",{staticClass:"prompt"},[t._v("发送时间：")]),t._v(" "),a("RadioGroup",{staticClass:"radio",model:{value:t.formAdd.newTime,callback:function(e){t.formAdd.newTime=e},expression:"formAdd.newTime"}},[a("Radio",{attrs:{label:0}},[t._v("立即发送")]),t._v(" "),a("Radio",{attrs:{label:1440}},[t._v("24小时后")]),t._v(" "),a("Radio",{attrs:{label:2880}},[t._v("48小时后")]),t._v(" "),a("Radio",{attrs:{label:4320}},[t._v("72小时后")]),t._v(" "),a("Radio",{attrs:{label:7200}},[t._v("120小时后")])],1)],1),t._v(" "),a("div",[a("Input",{staticStyle:{width:"568px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"请输入消息内容...",maxlength:600},model:{value:t.formAdd.newMessage,callback:function(e){t.formAdd.newMessage="string"==typeof e?e.trim():e},expression:"formAdd.newMessage"}})],1)],1),t._v(" "),a("Form-item",{attrs:{prop:"operationMessage","label-width":30}},[a("Checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:t.formAdd.operationStatus,callback:function(e){t.formAdd.operationStatus=e},expression:"formAdd.operationStatus"}},[a("span",{staticClass:"check"},[t._v("顾客上门治疗后(治疗未完成)，推送消息")])]),t._v(" "),a("div",{staticClass:"diff"},[a("span",{staticClass:"prompt"},[t._v("发送时间：")]),t._v(" "),a("RadioGroup",{staticClass:"radio",model:{value:t.formAdd.operationTime,callback:function(e){t.formAdd.operationTime=e},expression:"formAdd.operationTime"}},[a("Radio",{attrs:{label:0}},[t._v("立即发送")]),t._v(" "),a("Radio",{attrs:{label:1440}},[t._v("24小时后")]),t._v(" "),a("Radio",{attrs:{label:2880}},[t._v("48小时后")]),t._v(" "),a("Radio",{attrs:{label:4320}},[t._v("72小时后")]),t._v(" "),a("Radio",{attrs:{label:7200}},[t._v("120小时后")])],1)],1),t._v(" "),a("div",[a("Input",{staticStyle:{width:"568px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"请输入消息内容...",maxlength:600},model:{value:t.formAdd.operationMessage,callback:function(e){t.formAdd.operationMessage="string"==typeof e?e.trim():e},expression:"formAdd.operationMessage"}})],1)],1),t._v(" "),a("Form-item",{attrs:{prop:"completeMessage","label-width":30}},[a("Checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:t.formAdd.completeStatus,callback:function(e){t.formAdd.completeStatus=e},expression:"formAdd.completeStatus"}},[a("span",{staticClass:"check"},[t._v("全部疗程完成后，推送消息")])]),t._v(" "),a("div",{staticClass:"diff"},[a("span",{staticClass:"prompt"},[t._v("发送时间：")]),t._v(" "),a("RadioGroup",{staticClass:"radio",model:{value:t.formAdd.completeTime,callback:function(e){t.formAdd.completeTime=e},expression:"formAdd.completeTime"}},[a("Radio",{attrs:{label:0}},[t._v("立即发送")]),t._v(" "),a("Radio",{attrs:{label:1440}},[t._v("24小时后")]),t._v(" "),a("Radio",{attrs:{label:2880}},[t._v("48小时后")]),t._v(" "),a("Radio",{attrs:{label:4320}},[t._v("72小时后")]),t._v(" "),a("Radio",{attrs:{label:7200}},[t._v("120小时后")])],1)],1),t._v(" "),a("div",[a("Input",{staticStyle:{width:"568px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"请输入消息内容...",maxlength:600},model:{value:t.formAdd.completeMessage,callback:function(e){t.formAdd.completeMessage="string"==typeof e?e.trim():e},expression:"formAdd.completeMessage"}})],1)],1)],1)]),t._v(" "),a("div",{staticClass:"main-footer-btn"},[a("Button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("下一步")])],1)],1)])},r=[],s={render:o,staticRenderFns:r};e.a=s},"c/Tr":function(t,e,a){t.exports={default:a("5zde"),__esModule:!0}},fBQ2:function(t,e,a){"use strict";var o=a("evD5"),r=a("X8DO");t.exports=function(t,e,a){e in t?o.f(t,e,r(0,a)):t[e]=a}},fNCX:function(t,e,a){"use strict";var o=a("mvHQ"),r=a.n(o),s=a("Gu7T"),i=a.n(s);e.a={data:function(){var t=this,e=function(t,e,a){""===e?a(new Error("请输入规则名称！")):a()},a=function(t,e,a){""===e?a(new Error("请选择项目分类！")):a()},o=function(e,a,o){var r="";"newMessage"===e.field?r="newStatus":"operationMessage"===e.field?r="operationStatus":"completeMessage"===e.field&&(r="completeStatus"),t.formAdd[r]&&""===a?o(new Error("请输入消息内容！")):o()};return{formAdd:{name:"",description:"",categoryIds:"",categoryNames:"",newStatus:0,newTime:0,newMessage:"",operationStatus:0,operationTime:0,operationMessage:"",completeStatus:0,completeTime:0,completeMessage:""},category:"",categoryList:[],tagsBox:[],ruleForm:{name:[{validator:e,trigger:"blur"}],completeMessage:[{validator:o,trigger:"blur"}],operationMessage:[{validator:o,trigger:"blur"}],newMessage:[{validator:o,trigger:"blur"}],categoryIds:[{validator:a,trigger:"change"}]}}},beforeRouteLeave:function(t,e,a){e.meta.keepAlive=!0,a()},computed:{setCategoryId:function(){return this.tagsBox.map(function(t){return t.id}).join(",")},setCategoryName:function(){return this.tagsBox.map(function(t){return t.name}).join(",")}},mounted:function(){this.getCategoryList()},methods:{getCategoryList:function(){var t=this;t.$http.get({url:"doct-webManager/ruleMessage/getCategoryList.jhtml",success:function(e){0===e.code&&(t.categoryList=e.content||[])}})},setCategory:function(t){var e=this.tagsBox.findIndex(function(e){return e.id===t}),a=this.categoryList.filter(function(e){return e.id===t});if(e<0&&this.tagsBox.length<5){var o;(o=this.tagsBox).push.apply(o,i()(a)),this.formAdd.categoryIds=this.setCategoryId,this.$refs.formAdd.validateField("categoryIds")}},remove:function(t){this.tagsBox.splice(t,1),this.category=""},save:function(){var t=this;this.formAdd.newStatus||this.formAdd.completeStatus||this.formAdd.operationStatus?(this.formAdd.categoryIds=this.setCategoryId,this.formAdd.categoryNames=this.setCategoryName,this.$refs.formAdd.validate(function(e){e&&t.$router.push({path:"/previewAutoRule",query:{data:r()(t.formAdd)}})})):this.$Notice.error({title:"系统提示！",desc:"请至少填写一个消息模板！"})}}}},mvHQ:function(t,e,a){t.exports={default:a("qkKv"),__esModule:!0}},p7Cn:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".rule[data-v-d51f94b0]{padding-top:100px;padding-bottom:70px}.rule-item[data-v-d51f94b0]{margin-bottom:30px}.rule-item h3[data-v-d51f94b0]{padding-bottom:15px;border-bottom:1px solid #e5e5e5;margin-bottom:30px;font-size:16px;font-weight:400;line-height:22px;color:#333}.prompt[data-v-d51f94b0]{font-size:14px;color:#9e9e9e}.tit[data-v-d51f94b0]{margin-bottom:20px;font-size:14px;line-height:20px;color:#333}.category-tags[data-v-d51f94b0]{margin-top:20px}.tag-item[data-v-d51f94b0]{display:inline-block;vertical-align:top;margin:0 20px 10px 0}.radio label[data-v-d51f94b0]{margin-left:10px}.check[data-v-d51f94b0]{display:inline-block;vertical-align:top;padding-left:8px;font-size:14px;line-height:28px;color:#333}.diff[data-v-d51f94b0]{margin:5px 0}",""])},qkKv:function(t,e,a){var o=a("FeBl"),r=o.JSON||(o.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},qyJz:function(t,e,a){"use strict";var o=a("+ZMJ"),r=a("kM2E"),s=a("sB3e"),i=a("msXi"),n=a("Mhyx"),l=a("QRG4"),d=a("fBQ2"),c=a("3fs2");r(r.S+r.F*!a("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var e,a,r,p,f=s(t),m="function"==typeof this?this:Array,u=arguments.length,v=u>1?arguments[1]:void 0,g=void 0!==v,_=0,h=c(f);if(g&&(v=o(v,u>2?arguments[2]:void 0,2)),void 0==h||m==Array&&n(h))for(e=l(f.length),a=new m(e);e>_;_++)d(a,_,g?v(f[_],_):f[_]);else for(p=h.call(f),a=new m;!(r=p.next()).done;_++)d(a,_,g?i(p,v,[r.value,_],!0):r.value);return a.length=_,a}})}});